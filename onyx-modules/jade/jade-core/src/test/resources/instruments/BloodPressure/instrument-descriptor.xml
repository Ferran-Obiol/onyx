<?xml version="1.0" encoding="ISO-8859-1"?>
<instrumentType>

  <name>BloodPressure</name>

  <!--<contraindications> removed for now
    <contraIndication>
      <code>Other_CI</code>
      <requiresDescription>true</requiresDescription>
      <type>OBSERVED</type>
    </contraIndication>
  </contraindications>-->

  <instrumentParameters>
        
    <input id="arm_used">  <!-- Is really an interpretive value, but not yes, no; so input format used --> 
      <code>IV_ARM_USED</code>
      <dataType>TEXT</dataType>
      <captureMethod>MANUAL</captureMethod>
      <allowedValues>  <!-- OBTAIN DEFAULT FROM CI QUEST.-->
        <data type="TEXT">L</data>
        <data type="TEXT">R</data>
      </allowedValues>
    </input>
    
    <input id="upper_arm_length">  <!-- Is really an interpretive value, but not yes, no; so input format used --> 
      <code>IV_UPPER_ARM_LN</code>
      <measurementUnit>cm</measurementUnit>
      <dataType>DECIMAL</dataType>
      <captureMethod>MANUAL</captureMethod>
    </input>
    
    <input id="mid_upper_arm_circ">  <!-- Is really an interpretive value, but not yes, no; so input format used --> 
      <code>IV_UPPER_ARM_CIRC</code>
      <measurementUnit>cm</measurementUnit>
      <dataType>DECIMAL</dataType>
      <captureMethod>MANUAL</captureMethod>
    </input>
    
    <input id="arm_used">  <!-- Is really an interpretive value, but not yes, no; so input format used --> 
      <code>IV_ARMBAND_SIZE_USED</code>
      <dataType>TEXT</dataType>
      <captureMethod>MANUAL</captureMethod>
      <allowedValues>
        <data type="TEXT">IV_S</data>
        <data type="TEXT">IV_M</data>
        <data type="TEXT">IV_LG</data>
        <data type="TEXT">IV_XL</data>
      </allowedValues>  
    </input>
    
    <output id="blp1_systolic1">
      <code>RES_FIRST_SYSTOLIC_BP</code>
      <measurementUnit>mmHg</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_systolic1" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>299</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>299</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_systolic1" />
          <integerMinValueMale>82</integerMinValueMale>
          <integerMaxValueMale>195</integerMaxValueMale>
          <integerMinValueFemale>82</integerMinValueFemale>
          <integerMaxValueFemale>195</integerMaxValueFemale>
        </rangeCheck>
      </integrityChecks>
    </output>

    <output id="blp1_diastolic1">
      <code>RES_FIRST_DIASTOLIC_BP</code>
      <measurementUnit>mmHg</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_diastolic1" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>299</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>299</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_diastolic1" />
          <integerMinValueMale>57</integerMinValueMale>
          <integerMaxValueMale>103</integerMaxValueMale>
          <integerMinValueFemale>57</integerMinValueFemale>
          <integerMaxValueFemale>103</integerMaxValueFemale>
        </rangeCheck>
        <equalsParameterCheck>
          <targetParameter reference="blp1_diastolic1" />
          <parameter reference="blp1_systolic1" />
          <operator>LESSER</operator>
          <customizedDescription>EqualsParameterCheck_SystolicGreaterThanDiastolic1</customizedDescription>
        </equalsParameterCheck>
      </integrityChecks>
    </output>

    <output id="blp1_pulse1">
      <code>RES_FIRST_PULSE_RATE</code>
      <measurementUnit>BPM</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_pulse1" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>199</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>199</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_pulse1" />
          <integerMinValueMale>42</integerMinValueMale>
          <integerMaxValueMale>101</integerMaxValueMale>
          <integerMinValueFemale>42</integerMinValueFemale>
          <integerMaxValueFemale>101</integerMaxValueFemale>
        </rangeCheck>
      </integrityChecks>
    </output>

    <output id="blp1_systolic2">
      <code>RES_SEC_SYSTOLIC_BP</code>
      <measurementUnit>mmHg</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_systolic2" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>299</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>299</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_systolic2" />
          <integerMinValueMale>82</integerMinValueMale>
          <integerMaxValueMale>195</integerMaxValueMale>
          <integerMinValueFemale>82</integerMinValueFemale>
          <integerMaxValueFemale>195</integerMaxValueFemale>
        </rangeCheck>
      </integrityChecks>
    </output>

    <output id="blp1_diastolic2">
      <code>RES_SEC_DIASTOLIC_BP</code>
      <measurementUnit>mmHg</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_diastolic2" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>299</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>299</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_diastolic2" />
          <integerMinValueMale>57</integerMinValueMale>
          <integerMaxValueMale>103</integerMaxValueMale>
          <integerMinValueFemale>57</integerMinValueFemale>
          <integerMaxValueFemale>103</integerMaxValueFemale>
        </rangeCheck>
        <equalsParameterCheck>
          <targetParameter reference="blp1_diastolic2" />
          <parameter reference="blp1_systolic2" />
          <operator>LESSER</operator>
          <customizedDescription>EqualsParameterCheck_SystolicGreaterThanDiastolic2</customizedDescription>
        </equalsParameterCheck>
      </integrityChecks>
    </output>

    <output id="blp1_pulse2">
      <code>RES_SEC_PULSE_RATE</code>
      <measurementUnit>BPM</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_pulse2" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>199</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>199</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_pulse2" />
          <integerMinValueMale>42</integerMinValueMale>
          <integerMaxValueMale>101</integerMaxValueMale>
          <integerMinValueFemale>42</integerMinValueFemale>
          <integerMaxValueFemale>101</integerMaxValueFemale>
        </rangeCheck>
      </integrityChecks>
    </output>

    <output id="blp1_systolic3">
      <code>RES_THIRD_SYSTOLIC_BP</code>
      <measurementUnit>mmHg</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_systolic3" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>299</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>299</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_systolic3" />
          <integerMinValueMale>82</integerMinValueMale>
          <integerMaxValueMale>195</integerMaxValueMale>
          <integerMinValueFemale>82</integerMinValueFemale>
          <integerMaxValueFemale>195</integerMaxValueFemale>
        </rangeCheck>
      </integrityChecks>
    </output>

    <output id="blp1_diastolic3">
      <code>RES_THIRD_DIASTOLIC_BP</code>
      <measurementUnit>mmHg</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_diastolic3" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>299</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>299</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_diastolic3" />
          <integerMinValueMale>57</integerMinValueMale>
          <integerMaxValueMale>103</integerMaxValueMale>
          <integerMinValueFemale>57</integerMinValueFemale>
          <integerMaxValueFemale>103</integerMaxValueFemale>
        </rangeCheck>
        <equalsParameterCheck>
          <targetParameter reference="blp1_diastolic3" />
          <parameter reference="blp1_systolic3" />
          <operator>LESSER</operator>
          <customizedDescription>EqualsParameterCheck_SystolicGreaterThanDiastolic3</customizedDescription>
        </equalsParameterCheck>
      </integrityChecks>
    </output>

    <output id="blp1_pulse3">
      <code>RES_THIRD_PULSE_RATE</code>
      <measurementUnit>BPM</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>MANUAL</captureMethod>
      <integrityChecks>
        <rangeCheck>
          <targetParameter reference="blp1_pulse3" />
          <integerMinValueMale>30</integerMinValueMale>
          <integerMaxValueMale>199</integerMaxValueMale>
          <integerMinValueFemale>30</integerMinValueFemale>
          <integerMaxValueFemale>199</integerMaxValueFemale>
        </rangeCheck>
        <rangeCheck>
          <type>WARNING</type>
          <targetParameter reference="blp1_pulse3" />
          <integerMinValueMale>42</integerMinValueMale>
          <integerMaxValueMale>101</integerMaxValueMale>
          <integerMinValueFemale>42</integerMinValueFemale>
          <integerMaxValueFemale>101</integerMaxValueFemale>
        </rangeCheck>
      </integrityChecks>
    </output>

    <output>
      <code>CALC_AVG_SYSTOLIC_BP</code>
      <measurementUnit>mmHg</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>COMPUTED</captureMethod>
      <dataSource class="computingDataSource">
        <dataType>INTEGER</dataType>
        <unit>mmHg</unit>
        
        <expression>
          ($1 + $2 + $3)/3
        </expression>
        
        <dataSources>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_FIRST_SYSTOLIC_BP</parameterCode>
          </dataSource>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_SEC_SYSTOLIC_BP</parameterCode>
          </dataSource>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_THIRD_SYSTOLIC_BP</parameterCode>
          </dataSource>
        </dataSources>
      </dataSource>
    </output>

    <output>
      <code>CALC_AVG_DIASTOLIC_BP</code>
      <measurementUnit>mmHg</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>COMPUTED</captureMethod>
      <dataSource class="computingDataSource">
        <dataType>INTEGER</dataType>
        <unit>mmHg</unit>
        
        <expression>
          ($1 + $2 + $3)/3
        </expression>
          
        <dataSources>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_FIRST_DIASTOLIC_BP</parameterCode>
          </dataSource>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_SEC_DIASTOLIC_BP</parameterCode>
          </dataSource>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_THIRD_DIASTOLIC_BP</parameterCode>
          </dataSource>
        </dataSources>
      </dataSource>
    </output>

    <output>
      <code>CALC_AVG_PULSE_RATE</code>
      <measurementUnit>BPM</measurementUnit>
      <dataType>INTEGER</dataType>
      <captureMethod>COMPUTED</captureMethod>
      <dataSource class="computingDataSource">
        <dataType>INTEGER</dataType>
        <unit>BPM</unit>
        
        <expression>
          ($1 + $2 + $3)/3
        </expression>
        
        <dataSources>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_FIRST_PULSE_RATE</parameterCode>
          </dataSource>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_SEC_PULSE_RATE</parameterCode>
          </dataSource>
          <dataSource class="outputParameterDataSource">
            <instrumentType>BloodPressure</instrumentType>
            <parameterCode>RES_THIRD_PULSE_RATE</parameterCode>
          </dataSource>
        </dataSources>
      </dataSource>
    </output>
  </instrumentParameters>
</instrumentType>