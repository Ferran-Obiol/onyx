<stages>

  <stage>
    <name>BloodUrineSamplesCollection</name>
    <module>ruby</module>
    <stageDependencyCondition class="multipleCondition">
      <operator>AND</operator>
      <conditions>
        <variableCondition>
          <stageName>Consent</stageName>
          <variablePath>Onyx.Consent.accepted</variablePath>
        </variableCondition>
        <variableCondition>
          <stageName>CIPreliminaryQuestionnaire</stageName>
          <variablePath>Onyx.CIPreliminaryQuestionnaire.QuestionnaireRun.timeEnd</variablePath>
        </variableCondition>
        <variableCondition>
          <stageName>CIPreliminaryQuestionnaire</stageName>
          <variablePath>Onyx.CIPreliminaryQuestionnaire.STAGE_STATUS.BSC_CI.active</variablePath>
          <operator>ne</operator>
          <data>
            <type>BOOLEAN</type>
            <value class="boolean">true</value>
          </data>
        </variableCondition>
      </conditions>
    </stageDependencyCondition>
  </stage>

  <stage>
    <name>UrineSamplesCollection</name>
    <module>ruby</module>
    <stageDependencyCondition class="multipleCondition">
      <operator>AND</operator>
      <conditions>
        <variableCondition>
          <stageName>Consent</stageName>
          <variablePath>Onyx.Consent.accepted</variablePath>
        </variableCondition>
        <variableCondition>
          <stageName>CIPreliminaryQuestionnaire</stageName>
          <variablePath>Onyx.CIPreliminaryQuestionnaire.QuestionnaireRun.timeEnd</variablePath>
        </variableCondition>
        <variableCondition>
          <stageName>CIPreliminaryQuestionnaire</stageName>
          <variablePath>Onyx.CIPreliminaryQuestionnaire.STAGE_STATUS.BSC_CI.active</variablePath>
          <operator>ne</operator>
          <data>
            <type>BOOLEAN</type>
            <value class="boolean">true</value>
          </data>
        </variableCondition>
      </conditions>
    </stageDependencyCondition>
  </stage>
  
</stages>