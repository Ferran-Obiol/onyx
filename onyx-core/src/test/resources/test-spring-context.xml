<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"
  default-autowire="no">

  <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="properties">
      <value>
      <![CDATA[
        org.obiba.onyx.supportedRecruitmentTypes=
        
        # The Algorithm and Password configuration is just here to allow the beans to load correctly. This test
        # uses the deployment "beans.xml" file and some beans require configuration, even thought they're not
        # used directly in the test. It would be good for the test to use its own bean.xml file, and only load
        # what it requires.
        
        # Algorithm used to hash user passwords. 
        org.obiba.onyx.password.hash.algorithm=SHA
        
        # Password Validation Strategy
        org.obiba.onyx.password.validation.allowedCharacterGroups="A-Z","a-z","0-9","[.!@#$%&*()]"
        org.obiba.onyx.password.validation.minimumCharacterGroupsUsage=3
        org.obiba.onyx.password.validation.preventUserAttributeUsage=true
        org.obiba.onyx.password.validation.minimumSize=8
        org.obiba.onyx.password.validation.maximumSize=14
      ]]>
      </value>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="true" />
  </bean>

  <bean id="participantReader" class="org.obiba.onyx.core.etl.participant.impl.DefaultParticipantExcelReader"
    scope="prototype">
    <property name="participantMetadata" ref="participantMetadata" />
    <property name="sheetNumber" value="1" />
    <property name="headerRowNumber" value="2" />
    <property name="firstDataRowNumber" value="3" />
    <property name="columnNameToAttributeNameMap">
      <map>
        <entry key="Participant ID">
          <value>Enrollment ID</value>
        </entry>
        <entry key="Sex">
          <value>Gender</value>
        </entry>
        <entry key="Appointment date/time">
          <value>Appointment Time</value>
        </entry>
      </map>
    </property>
  </bean>

  <bean id="stageOrderingStrategy" class="org.obiba.onyx.engine.StaticStageOrderingStrategy">
    <property name="stageOrdering" value="" />
  </bean>

  <bean id="variablePathNamingStrategy" class="org.obiba.onyx.engine.variable.impl.DefaultVariablePathNamingStrategy">
    <property name="rootName" value="STUDY_NAME" />
  </bean>
  
  <bean id="userSessionService" class="org.obiba.onyx.core.service.impl.UserSessionServiceBeanImpl"/>

  <import resource="test-hibernate-config.xml" />
  <import resource="test-db-config.xml" />
  <import resource="classpath:META-INF/spring/onyx-core/context.xml" />
  
  <bean id="participantMetadata" class="org.obiba.onyx.core.domain.participant.ParticipantMetadata">
    <property name="participantIdPattern" value=".*" />
    <property name="onyxConfigPath" value="${org.obiba.onyx.config.path}" />
    <property name="supportedRecruitmentTypesString" value="${org.obiba.onyx.supportedRecruitmentTypes}" />
  </bean>  
  
</beans>
